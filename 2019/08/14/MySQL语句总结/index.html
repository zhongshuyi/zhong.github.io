<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="MySQL语句总结"><meta name="keywords" content="总结"><meta name="author" content="钟舒艺"><meta name="copyright" content="钟舒艺"><title>MySQL语句总结 | 钟舒艺的博客</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><link rel="dns-prefetch" href="https://unpkg.com"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitment/style/default.min.css"><script src="https://cdn.jsdelivr.net/npm/gitment/dist/gitment.browser.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#数据库操作"><span class="toc-number">1.</span> <span class="toc-text">数据库操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#通过DOS窗口输入命令"><span class="toc-number">1.0.0.1.</span> <span class="toc-text">通过DOS窗口输入命令:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建数据库"><span class="toc-number">1.0.0.2.</span> <span class="toc-text">创建数据库:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建数据库的同时指明数据库的字符集和校队规则"><span class="toc-number">1.0.0.3.</span> <span class="toc-text">创建数据库的同时指明数据库的字符集和校队规则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看指定数据库默认字符集和校对规则"><span class="toc-number">1.0.0.4.</span> <span class="toc-text">查看指定数据库默认字符集和校对规则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#修改数据库的字符集和校对规则"><span class="toc-number">1.0.0.5.</span> <span class="toc-text">修改数据库的字符集和校对规则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看数据库"><span class="toc-number">1.0.0.6.</span> <span class="toc-text">查看数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#选择数据库"><span class="toc-number">1.0.0.7.</span> <span class="toc-text">选择数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除数据库"><span class="toc-number">1.0.0.8.</span> <span class="toc-text">删除数据库</span></a></li></ol></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#表操作"><span class="toc-number">2.</span> <span class="toc-text">表操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#创建数据库中的表"><span class="toc-number">2.0.0.1.</span> <span class="toc-text">创建数据库中的表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看表的名称"><span class="toc-number">2.0.0.2.</span> <span class="toc-text">查看表的名称</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看表的结构"><span class="toc-number">2.0.0.3.</span> <span class="toc-text">查看表的结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看表的详细结构"><span class="toc-number">2.0.0.4.</span> <span class="toc-text">查看表的详细结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除表"><span class="toc-number">2.0.0.5.</span> <span class="toc-text">删除表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#修改表的名称"><span class="toc-number">2.0.0.6.</span> <span class="toc-text">修改表的名称</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#增加表的字段"><span class="toc-number">2.0.0.7.</span> <span class="toc-text">增加表的字段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除表的字段"><span class="toc-number">2.0.0.8.</span> <span class="toc-text">删除表的字段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#修改-表中的数据类型及字段顺序"><span class="toc-number">2.0.0.9.</span> <span class="toc-text">修改 表中的数据类型及字段顺序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#修改表中的列名"><span class="toc-number">2.0.0.10.</span> <span class="toc-text">修改表中的列名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#同时修改列名与数据类型"><span class="toc-number">2.0.0.11.</span> <span class="toc-text">同时修改列名与数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#修改表的其他选项"><span class="toc-number">2.0.0.12.</span> <span class="toc-text">修改表的其他选项</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#完整性约束"><span class="toc-number">3.</span> <span class="toc-text">完整性约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#主键约束"><span class="toc-number">3.0.0.1.</span> <span class="toc-text">主键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#列级-定义表时"><span class="toc-number">3.0.0.1.1.</span> <span class="toc-text">列级 (定义表时)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#表级"><span class="toc-number">3.0.0.1.2.</span> <span class="toc-text">表级</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#添加主键约束"><span class="toc-number">3.0.0.1.3.</span> <span class="toc-text">添加主键约束:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#删除主键约束"><span class="toc-number">3.0.0.1.4.</span> <span class="toc-text">删除主键约束</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建唯一-候选键-约束"><span class="toc-number">3.0.0.2.</span> <span class="toc-text">创建唯一(候选键)约束</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#列级-定义表时-1"><span class="toc-number">3.0.0.2.1.</span> <span class="toc-text">列级(定义表时)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#表级-1"><span class="toc-number">3.0.0.2.2.</span> <span class="toc-text">表级</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#候选键约束"><span class="toc-number">3.0.0.3.</span> <span class="toc-text">候选键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#添加候选键"><span class="toc-number">3.0.0.3.1.</span> <span class="toc-text">添加候选键</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#删除候选键"><span class="toc-number">3.0.0.3.2.</span> <span class="toc-text">删除候选键</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#非空约束"><span class="toc-number">3.0.0.4.</span> <span class="toc-text">非空约束</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#列级"><span class="toc-number">3.0.0.4.1.</span> <span class="toc-text">列级</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#在已存在的字段上修改字段为非空约束"><span class="toc-number">3.0.0.4.2.</span> <span class="toc-text">在已存在的字段上修改字段为非空约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#添加新字段并且创建非空约束"><span class="toc-number">3.0.0.4.3.</span> <span class="toc-text">添加新字段并且创建非空约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#删除非空约束"><span class="toc-number">3.0.0.4.4.</span> <span class="toc-text">删除非空约束</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#默认值"><span class="toc-number">3.0.0.5.</span> <span class="toc-text">默认值</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#列级-1"><span class="toc-number">3.0.0.5.1.</span> <span class="toc-text">列级</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#在已存在的字段上修改字段默认值"><span class="toc-number">3.0.0.5.2.</span> <span class="toc-text">在已存在的字段上修改字段默认值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#在表中添加字段并且设置初始值"><span class="toc-number">3.0.0.5.3.</span> <span class="toc-text">在表中添加字段并且设置初始值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#删除字符串默认值"><span class="toc-number">3.0.0.5.4.</span> <span class="toc-text">删除字符串默认值</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#自增约束"><span class="toc-number">3.0.0.6.</span> <span class="toc-text">自增约束</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#列级-2"><span class="toc-number">3.0.0.6.1.</span> <span class="toc-text">列级</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#在表中已存在的字段添加自增约束"><span class="toc-number">3.0.0.6.2.</span> <span class="toc-text">在表中已存在的字段添加自增约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#在表中添加新字段并且设置自增约束"><span class="toc-number">3.0.0.6.3.</span> <span class="toc-text">在表中添加新字段并且设置自增约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#删除自增约束"><span class="toc-number">3.0.0.6.4.</span> <span class="toc-text">删除自增约束</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#外键约束"><span class="toc-number">3.0.0.7.</span> <span class="toc-text">外键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#列级-3"><span class="toc-number">3.0.0.7.1.</span> <span class="toc-text">列级</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#在表中为已存在的字段添加外键约束"><span class="toc-number">3.0.0.7.2.</span> <span class="toc-text">在表中为已存在的字段添加外键约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#删除外键约束"><span class="toc-number">3.0.0.7.3.</span> <span class="toc-text">删除外键约束</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#索引"><span class="toc-number">4.</span> <span class="toc-text">索引</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#主键索引-添加主键"><span class="toc-number">4.0.0.1.</span> <span class="toc-text">主键索引 (添加主键)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#添加主键索引"><span class="toc-number">4.0.0.1.1.</span> <span class="toc-text">添加主键索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#删除主键索引"><span class="toc-number">4.0.0.1.2.</span> <span class="toc-text">删除主键索引</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#唯一索引-添加候选键"><span class="toc-number">4.0.0.2.</span> <span class="toc-text">唯一索引(添加候选键)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#删除唯一索引"><span class="toc-number">4.0.0.2.1.</span> <span class="toc-text">删除唯一索引</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#普通索引"><span class="toc-number">4.0.0.3.</span> <span class="toc-text">普通索引</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#表级-2"><span class="toc-number">4.0.0.3.1.</span> <span class="toc-text">表级</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#多列索引"><span class="toc-number">4.0.0.4.</span> <span class="toc-text">多列索引</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#表级-3"><span class="toc-number">4.0.0.4.1.</span> <span class="toc-text">表级</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看索引"><span class="toc-number">4.0.0.5.</span> <span class="toc-text">查看索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#添加索引"><span class="toc-number">4.0.0.6.</span> <span class="toc-text">添加索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除索引"><span class="toc-number">4.0.0.7.</span> <span class="toc-text">删除索引</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#表级-4"><span class="toc-number">4.0.0.7.1.</span> <span class="toc-text">表级</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#删除全文索引"><span class="toc-number">4.0.0.7.2.</span> <span class="toc-text">删除全文索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#添加全文索引-引擎必须为MYISAM"><span class="toc-number">4.0.0.7.3.</span> <span class="toc-text">添加全文索引(引擎必须为MYISAM)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#数据操作"><span class="toc-number">5.</span> <span class="toc-text">数据操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#插入数据"><span class="toc-number">5.0.0.1.</span> <span class="toc-text">插入数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看数据"><span class="toc-number">5.0.0.2.</span> <span class="toc-text">查看数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#更新数据"><span class="toc-number">5.0.0.3.</span> <span class="toc-text">更新数据</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#根据条件更新某一条数据"><span class="toc-number">5.0.0.3.1.</span> <span class="toc-text">根据条件更新某一条数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#更新所有的数据记录"><span class="toc-number">5.0.0.3.2.</span> <span class="toc-text">更新所有的数据记录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#根据条件删除"><span class="toc-number">5.0.0.3.3.</span> <span class="toc-text">根据条件删除</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#删除表中所有数据"><span class="toc-number">5.0.0.3.4.</span> <span class="toc-text">删除表中所有数据</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#数据查询"><span class="toc-number">6.</span> <span class="toc-text">数据查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#简单数据查询"><span class="toc-number">6.0.0.1.</span> <span class="toc-text">简单数据查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#查询所有数据"><span class="toc-number">6.0.0.1.1.</span> <span class="toc-text">查询所有数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#查询指定字段的数据记录"><span class="toc-number">6.0.0.1.2.</span> <span class="toc-text">查询指定字段的数据记录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#避免重复数据查询-distinct"><span class="toc-number">6.0.0.1.3.</span> <span class="toc-text">避免重复数据查询(distinct)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#多列记录显示在一列-concat"><span class="toc-number">6.0.0.1.4.</span> <span class="toc-text">多列记录显示在一列(concat)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#四则运算查询"><span class="toc-number">6.0.0.1.5.</span> <span class="toc-text">四则运算查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#时间查询"><span class="toc-number">6.0.0.1.6.</span> <span class="toc-text">时间查询:</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#条件数据查询"><span class="toc-number">6.0.0.2.</span> <span class="toc-text">条件数据查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#包含两个数据之间的查询"><span class="toc-number">6.0.0.2.1.</span> <span class="toc-text">包含两个数据之间的查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#带空字段的查询"><span class="toc-number">6.0.0.2.2.</span> <span class="toc-text">带空字段的查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#带in的集合查询"><span class="toc-number">6.0.0.2.3.</span> <span class="toc-text">带in的集合查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#模糊查询"><span class="toc-number">6.0.0.2.4.</span> <span class="toc-text">模糊查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#排序数据记录查询"><span class="toc-number">6.0.0.2.5.</span> <span class="toc-text">排序数据记录查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#限制记录查询"><span class="toc-number">6.0.0.2.6.</span> <span class="toc-text">限制记录查询</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#聚合查询"><span class="toc-number">6.0.0.3.</span> <span class="toc-text">聚合查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#count-计数函数"><span class="toc-number">6.0.0.3.1.</span> <span class="toc-text">count() 计数函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#avg-平均值函数"><span class="toc-number">6.0.0.3.2.</span> <span class="toc-text">avg()平均值函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#sum-求和函数"><span class="toc-number">6.0.0.3.3.</span> <span class="toc-text">sum()求和函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#min-最小值函数"><span class="toc-number">6.0.0.3.4.</span> <span class="toc-text">min()最小值函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#max-最大值函数"><span class="toc-number">6.0.0.3.5.</span> <span class="toc-text">max()最大值函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#format-函数支持四舍五入"><span class="toc-number">6.0.0.3.6.</span> <span class="toc-text">format()函数支持四舍五入</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#turncate-函数不支持四舍五入-直接截断"><span class="toc-number">6.0.0.3.7.</span> <span class="toc-text">turncate()函数不支持四舍五入,直接截断</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分组查询"><span class="toc-number">6.0.0.4.</span> <span class="toc-text">分组查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#常用函数"><span class="toc-number">6.0.0.5.</span> <span class="toc-text">常用函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#获取当前日期"><span class="toc-number">6.0.0.5.1.</span> <span class="toc-text">获取当前日期</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#获取当前时间"><span class="toc-number">6.0.0.5.2.</span> <span class="toc-text">获取当前时间</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#获取当前日期和时间"><span class="toc-number">6.0.0.5.3.</span> <span class="toc-text">获取当前日期和时间</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#数学函数"><span class="toc-number">6.0.0.5.4.</span> <span class="toc-text">数学函数</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#取绝对值函数"><span class="toc-number">6.0.0.5.4.1.</span> <span class="toc-text">取绝对值函数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#随机函数-0和1之间"><span class="toc-number">6.0.0.5.4.2.</span> <span class="toc-text">随机函数,0和1之间</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#向下取整函数"><span class="toc-number">6.0.0.5.4.3.</span> <span class="toc-text">向下取整函数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#开平方根函数"><span class="toc-number">6.0.0.5.4.4.</span> <span class="toc-text">开平方根函数</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#字符串函数"><span class="toc-number">6.0.0.5.5.</span> <span class="toc-text">字符串函数</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#小写转大写函数"><span class="toc-number">6.0.0.5.5.1.</span> <span class="toc-text">小写转大写函数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#从左开始取字符n个"><span class="toc-number">6.0.0.5.5.2.</span> <span class="toc-text">从左开始取字符n个</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#指定从第n个字符取m个字符串"><span class="toc-number">6.0.0.5.5.3.</span> <span class="toc-text">指定从第n个字符取m个字符串</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#其他函数"><span class="toc-number">6.0.0.5.6.</span> <span class="toc-text">其他函数</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#链接查询"><span class="toc-number">6.0.0.6.</span> <span class="toc-text">链接查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#交叉链接查询-笛卡尔积"><span class="toc-number">6.0.0.6.1.</span> <span class="toc-text">交叉链接查询(笛卡尔积)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#内链接"><span class="toc-number">6.0.0.6.2.</span> <span class="toc-text">内链接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#自然链接"><span class="toc-number">6.0.0.6.3.</span> <span class="toc-text">自然链接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#自链接-表的自身链接"><span class="toc-number">6.0.0.6.4.</span> <span class="toc-text">自链接:表的自身链接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#外链接"><span class="toc-number">6.0.0.6.5.</span> <span class="toc-text">外链接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#联合查询"><span class="toc-number">6.0.0.6.6.</span> <span class="toc-text">联合查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#子查询"><span class="toc-number">6.0.0.6.7.</span> <span class="toc-text">子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#带in的子查询"><span class="toc-number">6.0.0.6.7.1.</span> <span class="toc-text">带in的子查询</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#条件子查询"><span class="toc-number">6.0.0.6.7.2.</span> <span class="toc-text">条件子查询</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#带关键字any-some-all的比较运算符的子查询"><span class="toc-number">6.0.0.6.7.3.</span> <span class="toc-text">带关键字any,some,all的比较运算符的子查询</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#视图"><span class="toc-number">7.</span> <span class="toc-text">视图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#创建视图"><span class="toc-number">7.0.0.1.</span> <span class="toc-text">创建视图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建视图或修改视图"><span class="toc-number">7.0.0.2.</span> <span class="toc-text">创建视图或修改视图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看视图"><span class="toc-number">7.0.0.3.</span> <span class="toc-text">查看视图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#修改视图"><span class="toc-number">7.0.0.4.</span> <span class="toc-text">修改视图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看视图名称"><span class="toc-number">7.0.0.5.</span> <span class="toc-text">查看视图名称</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看视图结构和详细信息"><span class="toc-number">7.0.0.6.</span> <span class="toc-text">查看视图结构和详细信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除视图"><span class="toc-number">7.0.0.7.</span> <span class="toc-text">删除视图</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#对视图进行数据插入"><span class="toc-number">7.0.0.8.</span> <span class="toc-text">对视图进行数据插入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#对视图更新数据"><span class="toc-number">7.0.0.9.</span> <span class="toc-text">对视图更新数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除视图中的数据"><span class="toc-number">7.0.0.10.</span> <span class="toc-text">删除视图中的数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除视图中的数据-1"><span class="toc-number">7.0.0.11.</span> <span class="toc-text">删除视图中的数据</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#触发器"><span class="toc-number">8.</span> <span class="toc-text">触发器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#触发器的创建"><span class="toc-number">8.0.0.1.</span> <span class="toc-text">触发器的创建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#设置变量"><span class="toc-number">8.0.0.2.</span> <span class="toc-text">设置变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询变量"><span class="toc-number">8.0.0.3.</span> <span class="toc-text">查询变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命名结束符"><span class="toc-number">8.0.0.4.</span> <span class="toc-text">命名结束符</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#存储过程"><span class="toc-number">9.</span> <span class="toc-text">存储过程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#创建存储过程"><span class="toc-number">9.0.0.1.</span> <span class="toc-text">创建存储过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#执行存储过程"><span class="toc-number">9.0.0.2.</span> <span class="toc-text">执行存储过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#参数"><span class="toc-number">9.0.0.3.</span> <span class="toc-text">参数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#输入参数"><span class="toc-number">9.0.0.3.1.</span> <span class="toc-text">输入参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#输入参数-1"><span class="toc-number">9.0.0.3.2.</span> <span class="toc-text">输入参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#输出参数"><span class="toc-number">9.0.0.3.3.</span> <span class="toc-text">输出参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#输入输出参数"><span class="toc-number">9.0.0.3.4.</span> <span class="toc-text">输入输出参数</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查询结果输出至变量"><span class="toc-number">9.0.0.4.</span> <span class="toc-text">查询结果输出至变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#声明局部变量，并同时赋默认值"><span class="toc-number">9.0.0.5.</span> <span class="toc-text">声明局部变量，并同时赋默认值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#存储过程语句块范围"><span class="toc-number">9.0.0.6.</span> <span class="toc-text">存储过程语句块范围</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看存储过程"><span class="toc-number">9.0.0.7.</span> <span class="toc-text">查看存储过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除存储过程"><span class="toc-number">9.0.0.8.</span> <span class="toc-text">删除存储过程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#事件"><span class="toc-number">10.</span> <span class="toc-text">事件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#创建事件"><span class="toc-number">10.0.0.1.</span> <span class="toc-text">创建事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#时间调度（Schedule）"><span class="toc-number">10.0.0.2.</span> <span class="toc-text">时间调度（Schedule）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#立即执行"><span class="toc-number">10.0.0.2.1.</span> <span class="toc-text">立即执行</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#隔多长时间后执行"><span class="toc-number">10.0.0.2.2.</span> <span class="toc-text">隔多长时间后执行</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#每多长时间执行一次"><span class="toc-number">10.0.0.2.3.</span> <span class="toc-text">每多长时间执行一次</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Timestamp"><span class="toc-number">10.0.0.3.</span> <span class="toc-text">Timestamp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看事件调度器是否开启"><span class="toc-number">10.0.0.4.</span> <span class="toc-text">查看事件调度器是否开启</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看系统变量"><span class="toc-number">10.0.0.5.</span> <span class="toc-text">查看系统变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#开启事件调度器"><span class="toc-number">10.0.0.6.</span> <span class="toc-text">开启事件调度器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#修改事件"><span class="toc-number">10.0.0.7.</span> <span class="toc-text">修改事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#临时关闭已创建的事件"><span class="toc-number">10.0.0.8.</span> <span class="toc-text">临时关闭已创建的事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#再次开启已创建的事件"><span class="toc-number">10.0.0.9.</span> <span class="toc-text">再次开启已创建的事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#删除事件"><span class="toc-number">10.0.0.10.</span> <span class="toc-text">删除事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#条件选择循环以及游标"><span class="toc-number">10.0.0.11.</span> <span class="toc-text">条件选择循环以及游标</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#条件语句"><span class="toc-number">10.0.0.11.1.</span> <span class="toc-text">条件语句</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#分支选择语句"><span class="toc-number">10.0.0.11.2.</span> <span class="toc-text">分支选择语句</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#repeat循环"><span class="toc-number">10.0.0.11.3.</span> <span class="toc-text">repeat循环</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#游标-CURSOR"><span class="toc-number">10.0.0.12.</span> <span class="toc-text">游标(CURSOR)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-申明游标"><span class="toc-number">10.0.0.12.1.</span> <span class="toc-text">1.申明游标</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-开游标："><span class="toc-number">10.0.0.12.2.</span> <span class="toc-text">2.开游标：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-游标取值："><span class="toc-number">10.0.0.12.3.</span> <span class="toc-text">3.游标取值：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-关闭游标："><span class="toc-number">10.0.0.12.4.</span> <span class="toc-text">4.关闭游标：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#句柄"><span class="toc-number">10.0.0.13.</span> <span class="toc-text">句柄</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#定义句柄"><span class="toc-number">10.0.0.13.1.</span> <span class="toc-text">定义句柄</span></a></li></ol></li></ol></li></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.jpg"></div><div class="author-info__name text-center">钟舒艺</div><div class="author-info__description text-center">我们的征途是星辰大海,从此便只顾风雨兼程</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">5</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">3</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">4</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/img/325115.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">钟舒艺的博客</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a><a class="site-page" href="/">主页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">类别</a></span></div><div id="post-info"><div id="post-title">MySQL语句总结</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-08-14</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/MYSQL/">MYSQL</a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h1><h4 id="通过DOS窗口输入命令"><a href="#通过DOS窗口输入命令" class="headerlink" title="通过DOS窗口输入命令:"></a>通过DOS窗口输入命令:</h4><p><code>mysql -u root -p 回车后输入root的密码</code></p>
<h4 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库:"></a>创建数据库:</h4><p><code>create database 数据库名;</code></p>
<h4 id="创建数据库的同时指明数据库的字符集和校队规则"><a href="#创建数据库的同时指明数据库的字符集和校队规则" class="headerlink" title="创建数据库的同时指明数据库的字符集和校队规则"></a>创建数据库的同时指明数据库的字符集和校队规则</h4><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">create database 数据库名</span><br><span class="line">default character <span class="builtin-name">set</span> 字符集名称</span><br><span class="line">default collate 校对规则名称;</span><br></pre></td></tr></table></figure>

<h4 id="查看指定数据库默认字符集和校对规则"><a href="#查看指定数据库默认字符集和校对规则" class="headerlink" title="查看指定数据库默认字符集和校对规则"></a>查看指定数据库默认字符集和校对规则</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">(查看默认字符集) :<span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> ‘<span class="built_in">character</span>%’;</span><br><span class="line">查看默认校对规则):<span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> ‘<span class="keyword">collation</span>%’;</span><br></pre></td></tr></table></figure>

<h4 id="修改数据库的字符集和校对规则"><a href="#修改数据库的字符集和校对规则" class="headerlink" title="修改数据库的字符集和校对规则"></a>修改数据库的字符集和校对规则</h4><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">alter database 数据库名</span><br><span class="line">default character <span class="builtin-name">set</span> 字符集名称</span><br><span class="line">default collate  校对规则名;</span><br></pre></td></tr></table></figure>

<h4 id="查看数据库"><a href="#查看数据库" class="headerlink" title="查看数据库"></a>查看数据库</h4><p><code>show databases;</code></p>
<h4 id="选择数据库"><a href="#选择数据库" class="headerlink" title="选择数据库"></a>选择数据库</h4><p><code>use 数据库名;</code></p>
<h4 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h4><p><code>drop database 数据库名称;</code></p>
<h1 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h1><h4 id="创建数据库中的表"><a href="#创建数据库中的表" class="headerlink" title="创建数据库中的表"></a>创建数据库中的表</h4><figure class="highlight gams"><table><tr><td class="code"><pre><span class="line">create <span class="keyword">table</span> 表名(</span><br><span class="line">列名<span class="number">1</span> 数据类型,</span><br><span class="line">列名<span class="number">2</span> 数据类型</span><br><span class="line">....</span><br><span class="line">列名 n 数据类型);</span><br></pre></td></tr></table></figure>

<h4 id="查看表的名称"><a href="#查看表的名称" class="headerlink" title="查看表的名称"></a>查看表的名称</h4><p><code>show table;</code></p>
<h4 id="查看表的结构"><a href="#查看表的结构" class="headerlink" title="查看表的结构"></a>查看表的结构</h4><p><code>desc 表名;</code></p>
<h4 id="查看表的详细结构"><a href="#查看表的详细结构" class="headerlink" title="查看表的详细结构"></a>查看表的详细结构</h4><p><code>show create table 表名\G</code></p>
<h4 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h4><p><code>drop table 表名;</code></p>
<h4 id="修改表的名称"><a href="#修改表的名称" class="headerlink" title="修改表的名称"></a>修改表的名称</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 旧表名 <span class="keyword">rename</span> 新表名;</span><br><span class="line"><span class="keyword">rename</span> <span class="keyword">table</span> 旧表名 <span class="keyword">to</span> 新表名;</span><br></pre></td></tr></table></figure>

<h4 id="增加表的字段"><a href="#增加表的字段" class="headerlink" title="增加表的字段"></a>增加表的字段</h4><p><code>alter table 表名 add 列名 数据类型 [first \ after 已有的列名];</code></p>
<h4 id="删除表的字段"><a href="#删除表的字段" class="headerlink" title="删除表的字段"></a>删除表的字段</h4><p><code>alter table 表名 drop 字段名;</code></p>
<h4 id="修改-表中的数据类型及字段顺序"><a href="#修改-表中的数据类型及字段顺序" class="headerlink" title="修改 表中的数据类型及字段顺序"></a>修改 表中的数据类型及字段顺序</h4><p><code>alter table 表名 modify 列名 数据类型 [first \ after 已有列名];</code></p>
<h4 id="修改表中的列名"><a href="#修改表中的列名" class="headerlink" title="修改表中的列名"></a>修改表中的列名</h4><p><code>alter table 表名 change 原列名 新列名 数据类型;</code></p>
<h4 id="同时修改列名与数据类型"><a href="#同时修改列名与数据类型" class="headerlink" title="同时修改列名与数据类型"></a>同时修改列名与数据类型</h4><p><code>alter table 表名 change 原列名 新列名 新数据类型;</code></p>
<h4 id="修改表的其他选项"><a href="#修改表的其他选项" class="headerlink" title="修改表的其他选项"></a>修改表的其他选项</h4><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">储存引擎:alter table 表名 <span class="attribute">engine</span>=新储存引擎;</span><br><span class="line">字符集:alter table 表名<span class="built_in"> default </span>charset =新字符集;</span><br><span class="line">自增字段初始值:alter table 表名 <span class="attribute">auto_increment</span>=新初始值;</span><br></pre></td></tr></table></figure>

<h1 id="完整性约束"><a href="#完整性约束" class="headerlink" title="完整性约束"></a>完整性约束</h1><h4 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h4><h5 id="列级-定义表时"><a href="#列级-定义表时" class="headerlink" title="列级 (定义表时)"></a>列级 (定义表时)</h5><p><code>列名 数据类型 primary  key,</code></p>
<h5 id="表级"><a href="#表级" class="headerlink" title="表级"></a>表级</h5><figure class="highlight less"><table><tr><td class="code"><pre><span class="line">表中所以字段定义后添加<span class="selector-tag">primary</span> <span class="selector-tag">key</span>(列名<span class="number">1</span>,列名<span class="number">2</span>...)</span><br><span class="line">定义约束名字<span class="selector-pseudo">:constraint</span> 约束名字 <span class="selector-tag">primary</span> <span class="selector-tag">key</span>(列名<span class="number">1</span>,.列名n)</span><br></pre></td></tr></table></figure>

<h5 id="添加主键约束"><a href="#添加主键约束" class="headerlink" title="添加主键约束:"></a>添加主键约束:</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> primary <span class="keyword">key</span> (列名<span class="number">1.</span>.列名n);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> <span class="keyword">constraint</span> 约束名字 primary <span class="keyword">key</span>(字段名<span class="number">1</span>,....字段名n);</span><br></pre></td></tr></table></figure>

<h5 id="删除主键约束"><a href="#删除主键约束" class="headerlink" title="删除主键约束"></a>删除主键约束</h5><p><code>alter table 表名 drop primary key;</code></p>
<h4 id="创建唯一-候选键-约束"><a href="#创建唯一-候选键-约束" class="headerlink" title="创建唯一(候选键)约束"></a>创建唯一(候选键)约束</h4><h5 id="列级-定义表时-1"><a href="#列级-定义表时-1" class="headerlink" title="列级(定义表时)"></a>列级(定义表时)</h5><p><code>字段名 数据类型 unique,</code></p>
<h5 id="表级-1"><a href="#表级-1" class="headerlink" title="表级"></a>表级</h5><figure class="highlight lsl"><table><tr><td class="code"><pre><span class="line">unique(字段名<span class="number">1</span>,字段名<span class="number">2.</span>...)</span><br><span class="line">constraint 约束名 unique (字段名<span class="number">1</span>,字段名<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<h4 id="候选键约束"><a href="#候选键约束" class="headerlink" title="候选键约束"></a>候选键约束</h4><h5 id="添加候选键"><a href="#添加候选键" class="headerlink" title="添加候选键"></a>添加候选键</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> <span class="keyword">unique</span> (列名<span class="number">1</span>,..列名n);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">constraint</span> 约束名字 <span class="keyword">unique</span> (列名<span class="number">1.</span>..列名n)</span><br></pre></td></tr></table></figure>

<h5 id="删除候选键"><a href="#删除候选键" class="headerlink" title="删除候选键"></a>删除候选键</h5><p><code>alter table 表名 drop index 约束名\候选键字段名;</code></p>
<h4 id="非空约束"><a href="#非空约束" class="headerlink" title="非空约束"></a>非空约束</h4><h5 id="列级"><a href="#列级" class="headerlink" title="列级"></a>列级</h5><p><code>字段名 数据类型 not null,</code></p>
<h5 id="在已存在的字段上修改字段为非空约束"><a href="#在已存在的字段上修改字段为非空约束" class="headerlink" title="在已存在的字段上修改字段为非空约束"></a>在已存在的字段上修改字段为非空约束</h5><p><code>alter table 表名 modify 字段名 数据类型 not null;</code></p>
<h5 id="添加新字段并且创建非空约束"><a href="#添加新字段并且创建非空约束" class="headerlink" title="添加新字段并且创建非空约束"></a>添加新字段并且创建非空约束</h5><p><code>alter table 表名 add 字段名 数据类型 not null;</code></p>
<h5 id="删除非空约束"><a href="#删除非空约束" class="headerlink" title="删除非空约束"></a>删除非空约束</h5><p><code>alter table 表名 modify 字段名 数据类型 NULL;</code></p>
<h4 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h4><h5 id="列级-1"><a href="#列级-1" class="headerlink" title="列级"></a>列级</h5><p><code>字段名 数据类型 default 数值\字符串</code></p>
<h5 id="在已存在的字段上修改字段默认值"><a href="#在已存在的字段上修改字段默认值" class="headerlink" title="在已存在的字段上修改字段默认值"></a>在已存在的字段上修改字段默认值</h5><p><code>alter table 表名 alter 字段名 set drfault 数值\字符串;</code></p>
<h5 id="在表中添加字段并且设置初始值"><a href="#在表中添加字段并且设置初始值" class="headerlink" title="在表中添加字段并且设置初始值"></a>在表中添加字段并且设置初始值</h5><p><code>alter table 表名 add 新字段名 数据类型 default 数值\字符串;</code></p>
<h5 id="删除字符串默认值"><a href="#删除字符串默认值" class="headerlink" title="删除字符串默认值"></a>删除字符串默认值</h5><p><code>alter table 表名 alter 字段名 drop defaule;</code></p>
<h4 id="自增约束"><a href="#自增约束" class="headerlink" title="自增约束"></a>自增约束</h4><p>(必须为主键或者候选键且数据类型必须为int)</p>
<h5 id="列级-2"><a href="#列级-2" class="headerlink" title="列级"></a>列级</h5><p><code>字段名 数据类型 primary key \unique auto_increment</code></p>
<h5 id="在表中已存在的字段添加自增约束"><a href="#在表中已存在的字段添加自增约束" class="headerlink" title="在表中已存在的字段添加自增约束"></a>在表中已存在的字段添加自增约束</h5><p><code>alter table 表名 modify 字段名 数据类型 auto_increment primary primary key \unique ;</code></p>
<h5 id="在表中添加新字段并且设置自增约束"><a href="#在表中添加新字段并且设置自增约束" class="headerlink" title="在表中添加新字段并且设置自增约束"></a>在表中添加新字段并且设置自增约束</h5><p><code>alter table 表名 add 字段名 数据类型 primary key/unique auto_increment;</code></p>
<h5 id="删除自增约束"><a href="#删除自增约束" class="headerlink" title="删除自增约束"></a>删除自增约束</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> t9 <span class="keyword">modify</span> <span class="keyword">id</span> <span class="built_in">int</span>(<span class="number">11</span>);</span><br><span class="line"><span class="comment">#这里用的modify，只改变数据类型，也可以用change，改变列名的同时输入新的数据类型。</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> primary <span class="keyword">key</span> /<span class="keyword">unique</span>;</span><br></pre></td></tr></table></figure>

<h4 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h4><p>(表储存引擎必须为innodb)</p>
<h5 id="列级-3"><a href="#列级-3" class="headerlink" title="列级"></a>列级</h5><p><code>[constraint 外键约束名] foreign key(字段名) reference 被参照表(字段名)</code></p>
<h5 id="在表中为已存在的字段添加外键约束"><a href="#在表中为已存在的字段添加外键约束" class="headerlink" title="在表中为已存在的字段添加外键约束"></a>在表中为已存在的字段添加外键约束</h5><p><code>alter table 参照表名 add [constraint 外键约束名] foreign key(参照表字段) references 被参照表(被参照字段);</code></p>
<h5 id="删除外键约束"><a href="#删除外键约束" class="headerlink" title="删除外键约束"></a>删除外键约束</h5><p><code>alter table 表名 drop foreign key 约束名;</code></p>
<h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><h4 id="主键索引-添加主键"><a href="#主键索引-添加主键" class="headerlink" title="主键索引 (添加主键)"></a>主键索引 (添加主键)</h4><h5 id="添加主键索引"><a href="#添加主键索引" class="headerlink" title="添加主键索引"></a>添加主键索引</h5><p><code>alter table 表名 add primary key(字段名);</code></p>
<h5 id="删除主键索引"><a href="#删除主键索引" class="headerlink" title="删除主键索引"></a>删除主键索引</h5><p><code>alter table 表名 drop primary key;</code></p>
<h4 id="唯一索引-添加候选键"><a href="#唯一索引-添加候选键" class="headerlink" title="唯一索引(添加候选键)"></a>唯一索引(添加候选键)</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> <span class="keyword">unique</span>(字段名);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> <span class="keyword">index</span> 索引名 <span class="keyword">on</span> 表名(字段名);</span><br></pre></td></tr></table></figure>

<h5 id="删除唯一索引"><a href="#删除唯一索引" class="headerlink" title="删除唯一索引"></a>删除唯一索引</h5><p><code>alter table 表名 drop index 约束名\字段名</code></p>
<h4 id="普通索引"><a href="#普通索引" class="headerlink" title="普通索引"></a>普通索引</h4><h5 id="表级-2"><a href="#表级-2" class="headerlink" title="表级"></a>表级</h5><p><code>index||key 索引名(字段名)</code></p>
<h4 id="多列索引"><a href="#多列索引" class="headerlink" title="多列索引"></a>多列索引</h4><h5 id="表级-3"><a href="#表级-3" class="headerlink" title="表级"></a>表级</h5><p><code>index||key 索引名 (字段名1,字段名2)</code></p>
<h4 id="查看索引"><a href="#查看索引" class="headerlink" title="查看索引"></a>查看索引</h4><p><code>show index from 表名\G</code></p>
<h4 id="添加索引"><a href="#添加索引" class="headerlink" title="添加索引"></a>添加索引</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">index</span> 索引名 <span class="keyword">on</span> 表名(字段名);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> <span class="keyword">index</span> 索引名(字段名);</span><br></pre></td></tr></table></figure>

<h4 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h4><p><code>drop index 约束名||首个字段名;</code></p>
<p>全#### 文索引<br>(字段必须是字符型,引擎必须为MYISAM</p>
<h5 id="表级-4"><a href="#表级-4" class="headerlink" title="表级"></a>表级</h5><p><code>fulltext index [索引名](字段名1,字段名2))engine=MYISAM;</code></p>
<h5 id="删除全文索引"><a href="#删除全文索引" class="headerlink" title="删除全文索引"></a>删除全文索引</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">index</span> 索引名 <span class="keyword">on</span> 表名;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> <span class="keyword">index</span> 索引名||首个字段名</span><br></pre></td></tr></table></figure>

<h5 id="添加全文索引-引擎必须为MYISAM"><a href="#添加全文索引-引擎必须为MYISAM" class="headerlink" title="添加全文索引(引擎必须为MYISAM)"></a>添加全文索引(引擎必须为MYISAM)</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> fulltext <span class="keyword">index</span> 索引名 <span class="keyword">on</span> 表名(字段名);</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> fulltext <span class="keyword">index</span> 索引名(字段名)</span><br></pre></td></tr></table></figure>

<h1 id="数据操作"><a href="#数据操作" class="headerlink" title="数据操作"></a>数据操作</h1><h4 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h4><figure class="highlight lsl"><table><tr><td class="code"><pre><span class="line">insert  into 表名 (字段名<span class="number">1</span>,字段名<span class="number">2</span>,...字段名n)</span><br><span class="line">values(数值<span class="number">1</span>,数值<span class="number">2</span>,...数值n);</span><br></pre></td></tr></table></figure>

<h4 id="查看数据"><a href="#查看数据" class="headerlink" title="查看数据"></a>查看数据</h4><p><code>select * from 表名;</code></p>
<h4 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h4><h5 id="根据条件更新某一条数据"><a href="#根据条件更新某一条数据" class="headerlink" title="根据条件更新某一条数据"></a>根据条件更新某一条数据</h5><p><code>update 表名 set 字段名 = 数值 where 要修改的字段名=数值;</code></p>
<h5 id="更新所有的数据记录"><a href="#更新所有的数据记录" class="headerlink" title="更新所有的数据记录"></a>更新所有的数据记录</h5><p><code>update 表名 set 字段名=数值;</code></p>
<h5 id="根据条件删除"><a href="#根据条件删除" class="headerlink" title="根据条件删除"></a>根据条件删除</h5><p><code>delete from 表名 where 字段名=数值;</code></p>
<h5 id="删除表中所有数据"><a href="#删除表中所有数据" class="headerlink" title="删除表中所有数据"></a>删除表中所有数据</h5><p><code>delete from 表名;</code></p>
<h1 id="数据查询"><a href="#数据查询" class="headerlink" title="数据查询"></a>数据查询</h1><h4 id="简单数据查询"><a href="#简单数据查询" class="headerlink" title="简单数据查询"></a>简单数据查询</h4><h5 id="查询所有数据"><a href="#查询所有数据" class="headerlink" title="查询所有数据"></a>查询所有数据</h5><p><code>select*form 表名</code></p>
<h5 id="查询指定字段的数据记录"><a href="#查询指定字段的数据记录" class="headerlink" title="查询指定字段的数据记录"></a>查询指定字段的数据记录</h5><p><code>select  字段名1, 字段名2 ,.......字段名n  from 表名;</code></p>
<h5 id="避免重复数据查询-distinct"><a href="#避免重复数据查询-distinct" class="headerlink" title="避免重复数据查询(distinct)"></a>避免重复数据查询(distinct)</h5><p><code>select distinct 字段名 from 表名;</code></p>
<h5 id="多列记录显示在一列-concat"><a href="#多列记录显示在一列-concat" class="headerlink" title="多列记录显示在一列(concat)"></a>多列记录显示在一列(concat)</h5><p><code>select concat(字段名1,’描述信息’,....字段名n) as 别名 from 表名;</code></p>
<h5 id="四则运算查询"><a href="#四则运算查询" class="headerlink" title="四则运算查询"></a>四则运算查询</h5><h5 id="时间查询"><a href="#时间查询" class="headerlink" title="时间查询:"></a>时间查询:</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">now</span>();</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">year</span> <span class="keyword">now</span>();(查询现在的年份)</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">year</span>(<span class="keyword">now</span>())-<span class="keyword">year</span>(字段名) <span class="keyword">as</span> 年龄 <span class="keyword">from</span> 表名;</span><br></pre></td></tr></table></figure>

<h4 id="条件数据查询"><a href="#条件数据查询" class="headerlink" title="条件数据查询"></a>条件数据查询</h4><pre><code>where 条件
关系运算符
逻辑运算符</code></pre><p><code>select 字段名1,字段名2,.... from 表名 where 条件;</code></p>
<h5 id="包含两个数据之间的查询"><a href="#包含两个数据之间的查询" class="headerlink" title="包含两个数据之间的查询"></a>包含两个数据之间的查询</h5><p>(between)(在between前加not 表示排除这之间的条件)<br><code>select 字段名1,字段名2.....from 表名 where 字段名 between 数值1 and 80;</code></p>
<h5 id="带空字段的查询"><a href="#带空字段的查询" class="headerlink" title="带空字段的查询"></a>带空字段的查询</h5><p><code>select 字段名1,字段名,字段名n  form 表名 where 字段名 is NULL;</code></p>
<h5 id="带in的集合查询"><a href="#带in的集合查询" class="headerlink" title="带in的集合查询"></a>带in的集合查询</h5><p>(若为not in则则排除这些条件)<br><code>select 字段1,字段2,.,..  from 表名 where 字段名 in(‘条件1’,’条件2’);</code></p>
<h5 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h5><figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段<span class="number">1</span>,字段<span class="number">2</span>,.,..  <span class="keyword">from</span> 表名 <span class="keyword">where</span> 字段名  <span class="keyword">like</span> ‘数值’;</span><br><span class="line">数值:由通配符和字符或数字组成</span><br><span class="line">通配符:_ 代表单个字符或数字</span><br><span class="line">通配符:% 代表任意单个或多个字符或数字</span><br><span class="line">like ‘%字符或数字%’;  模糊查询</span><br></pre></td></tr></table></figure>

<h5 id="排序数据记录查询"><a href="#排序数据记录查询" class="headerlink" title="排序数据记录查询"></a>排序数据记录查询</h5><figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段名 <span class="keyword">from</span> 表名 <span class="keyword">order</span> <span class="keyword">by</span> 字段名 <span class="keyword">asc</span>|<span class="keyword">desc</span> (升,降序)</span><br><span class="line">若没有升降序则默认升序</span><br><span class="line">多个字段排序规则:按照字段先来先排的规则</span><br><span class="line">当首个排序字段遇上相同数据时,后来的字段根据实际排序规则进行排序</span><br></pre></td></tr></table></figure>

<h5 id="限制记录查询"><a href="#限制记录查询" class="headerlink" title="限制记录查询"></a>限制记录查询</h5><figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段名 <span class="keyword">from</span> 表名 <span class="keyword">limit</span> 起始位置,显示行数;</span><br><span class="line"><span class="keyword">select</span> 字段名 <span class="keyword">from</span> 表名 <span class="keyword">limit</span>显示行数 <span class="keyword">offset</span> 起始位置;</span><br><span class="line"><span class="keyword">select</span> 字段名 <span class="keyword">from</span> 表名 <span class="keyword">limit</span> 显示行数;</span><br><span class="line">起始位置从0开始</span><br></pre></td></tr></table></figure>

<h4 id="聚合查询"><a href="#聚合查询" class="headerlink" title="聚合查询"></a>聚合查询</h4><h5 id="count-计数函数"><a href="#count-计数函数" class="headerlink" title="count() 计数函数"></a>count() 计数函数</h5><p><code>select count(*)from 表名;</code><br>*–代表表中任意一列字段</p>
<h5 id="avg-平均值函数"><a href="#avg-平均值函数" class="headerlink" title="avg()平均值函数"></a>avg()平均值函数</h5><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">avg</span><span class="params">(字段名)</span></span></span><br><span class="line"><span class="function"><span class="title">avg</span><span class="params">(表达式)</span></span></span><br></pre></td></tr></table></figure>

<h5 id="sum-求和函数"><a href="#sum-求和函数" class="headerlink" title="sum()求和函数"></a>sum()求和函数</h5><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">sum</span><span class="params">(字段名)</span></span></span><br><span class="line"><span class="function"><span class="title">sum</span><span class="params">(表达式)</span></span></span><br></pre></td></tr></table></figure>

<h5 id="min-最小值函数"><a href="#min-最小值函数" class="headerlink" title="min()最小值函数"></a>min()最小值函数</h5><p><code>min(字段名)</code></p>
<h5 id="max-最大值函数"><a href="#max-最大值函数" class="headerlink" title="max()最大值函数"></a>max()最大值函数</h5><p><code>max(字段名)</code></p>
<h5 id="format-函数支持四舍五入"><a href="#format-函数支持四舍五入" class="headerlink" title="format()函数支持四舍五入"></a>format()函数支持四舍五入</h5><h5 id="turncate-函数不支持四舍五入-直接截断"><a href="#turncate-函数不支持四舍五入-直接截断" class="headerlink" title="turncate()函数不支持四舍五入,直接截断"></a>turncate()函数不支持四舍五入,直接截断</h5><h4 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h4><p><code>group by 字段名1,字段名2 having 条件;</code></p>
<h4 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h4><h5 id="获取当前日期"><a href="#获取当前日期" class="headerlink" title="获取当前日期"></a>获取当前日期</h5><p><code>curdate或current_date 2019-04-19</code></p>
<h5 id="获取当前时间"><a href="#获取当前时间" class="headerlink" title="获取当前时间"></a>获取当前时间</h5><p><code>curtime或current_time 12:00:50</code></p>
<h5 id="获取当前日期和时间"><a href="#获取当前日期和时间" class="headerlink" title="获取当前日期和时间"></a>获取当前日期和时间</h5><figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line">now()<span class="comment">;</span></span><br><span class="line">year(<span class="name">now</span>())<span class="comment">;</span></span><br><span class="line">time(<span class="name">now</span>())<span class="comment">;</span></span><br><span class="line">month(<span class="name">now</span>())<span class="comment">;</span></span><br><span class="line">day(<span class="name">now</span>())<span class="comment">;</span></span><br><span class="line">week(<span class="name">now</span>())<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<h5 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h5><h6 id="取绝对值函数"><a href="#取绝对值函数" class="headerlink" title="取绝对值函数"></a>取绝对值函数</h6><p><code>abs()</code></p>
<h6 id="随机函数-0和1之间"><a href="#随机函数-0和1之间" class="headerlink" title="随机函数,0和1之间"></a>随机函数,0和1之间</h6><p><code>rand()</code></p>
<h6 id="向下取整函数"><a href="#向下取整函数" class="headerlink" title="向下取整函数"></a>向下取整函数</h6><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">fool</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="title">fool</span><span class="params">(-<span class="number">9.87</span>)</span></span> -<span class="number">10</span></span><br><span class="line"><span class="function"><span class="title">fool</span><span class="params">(<span class="number">4.3</span>)</span></span>   <span class="number">5</span></span><br></pre></td></tr></table></figure>

<h6 id="开平方根函数"><a href="#开平方根函数" class="headerlink" title="开平方根函数"></a>开平方根函数</h6><p><code>sqrt()</code></p>
<h5 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h5><h6 id="小写转大写函数"><a href="#小写转大写函数" class="headerlink" title="小写转大写函数"></a>小写转大写函数</h6><p><code>upper()和ucase()</code></p>
<h6 id="从左开始取字符n个"><a href="#从左开始取字符n个" class="headerlink" title="从左开始取字符n个"></a>从左开始取字符n个</h6><p><code>left(&#39;字符串&#39;,n);</code></p>
<h6 id="指定从第n个字符取m个字符串"><a href="#指定从第n个字符取m个字符串" class="headerlink" title="指定从第n个字符取m个字符串"></a>指定从第n个字符取m个字符串</h6><p><code>substring(&#39;字符串&#39;,n,m);</code></p>
<h5 id="其他函数"><a href="#其他函数" class="headerlink" title="其他函数"></a>其他函数</h5><figure class="highlight smali"><table><tr><td class="code"><pre><span class="line">if(表达式,v1,v2);若表达式成立则执行v1,若不成立执行v2</span><br><span class="line">ifnull(v1,v2)若字段v1有空则输出v2</span><br></pre></td></tr></table></figure>


<h4 id="链接查询"><a href="#链接查询" class="headerlink" title="链接查询"></a>链接查询</h4><h5 id="交叉链接查询-笛卡尔积"><a href="#交叉链接查询-笛卡尔积" class="headerlink" title="交叉链接查询(笛卡尔积)"></a>交叉链接查询(笛卡尔积)</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> 表<span class="number">1</span> <span class="keyword">cross</span> <span class="keyword">join</span> 表<span class="number">2</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> 表<span class="number">1</span>,表<span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<h5 id="内链接"><a href="#内链接" class="headerlink" title="内链接"></a>内链接</h5><figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> 表<span class="number">1</span>,表<span class="number">2</span> <span class="keyword">where</span> 过滤条件</span><br><span class="line"><span class="keyword">select</span>*<span class="keyword">from</span> 表<span class="number">1</span> lnner <span class="keyword">join</span> 表<span class="number">2</span> <span class="keyword">on</span> 过滤条件;</span><br></pre></td></tr></table></figure>

<h5 id="自然链接"><a href="#自然链接" class="headerlink" title="自然链接"></a>自然链接</h5><p>(自然链接的两个表中的两个字段名必须相同,并且字段的内容必须相同或者相似)<br><code>select * from 表1 natural join 表2;</code></p>
<h5 id="自链接-表的自身链接"><a href="#自链接-表的自身链接" class="headerlink" title="自链接:表的自身链接"></a>自链接:表的自身链接</h5><p>(查询的表与做条件的表不能是一个表)</p>
<figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> a.*<span class="keyword">from</span> 表<span class="number">1</span> a <span class="keyword">join</span> 表<span class="number">1</span> b <span class="keyword">on</span> a.字段名<span class="number">1</span>=b.字段名<span class="number">1</span>;</span><br><span class="line"><span class="keyword">select</span> b.*<span class="keyword">from</span> 表<span class="number">1</span> a <span class="keyword">join</span> 表<span class="number">1</span> b <span class="keyword">on</span> a.字段名<span class="number">1</span>=a.字段名<span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h5 id="外链接"><a href="#外链接" class="headerlink" title="外链接"></a>外链接</h5><p>左外链接:left[outer]join(以左表为基准表,显示左表中的全部内容,右边只显示与左表条件相同的部分,不同的以NULL代替)<br><code>select*from 表1 left join 表2 on|where 链接条件;</code><br>右外链接<code>:right[outer]join</code></p>
<h5 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h5><p>union(显示合并之后的所有记录,去除重复项)<br>union all(显示所有的链接记录)<br>*联合查询只显示union之间表的字段名称<br>联合查询的两个表的链接的字段数据类型必须是兼容的</p>
<h5 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h5><h6 id="带in的子查询"><a href="#带in的子查询" class="headerlink" title="带in的子查询"></a>带in的子查询</h6><figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段名 <span class="keyword">from</span> 表名<span class="number">1</span> <span class="keyword">where</span> 字段名 <span class="keyword">in</span></span><br><span class="line">(<span class="keyword">select</span> 字段名 <span class="keyword">from</span> 表名<span class="number">2</span> );</span><br></pre></td></tr></table></figure>

<h6 id="条件子查询"><a href="#条件子查询" class="headerlink" title="条件子查询"></a>条件子查询</h6><figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段名 <span class="keyword">from</span> 表名<span class="number">1</span> <span class="keyword">where</span> 字段名 <span class="keyword">not</span> <span class="keyword">in</span></span><br><span class="line">(<span class="keyword">select</span> 字段名 <span class="keyword">from</span> 表名<span class="number">2</span> );</span><br></pre></td></tr></table></figure>

<h6 id="带关键字any-some-all的比较运算符的子查询"><a href="#带关键字any-some-all的比较运算符的子查询" class="headerlink" title="带关键字any,some,all的比较运算符的子查询"></a>带关键字any,some,all的比较运算符的子查询</h6><p>关键字any,some代表某一个,all代表所有</p>
<h1 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h1><h4 id="创建视图"><a href="#创建视图" class="headerlink" title="创建视图"></a>创建视图</h4><p><code>Create view 视图名 as  查询语句;</code></p>
<h4 id="创建视图或修改视图"><a href="#创建视图或修改视图" class="headerlink" title="创建视图或修改视图"></a>创建视图或修改视图</h4><p><code>create or replace 视图名 as 查询语句</code></p>
<h4 id="查看视图"><a href="#查看视图" class="headerlink" title="查看视图"></a>查看视图</h4><p><code>Select * from 视图名;</code></p>
<h4 id="修改视图"><a href="#修改视图" class="headerlink" title="修改视图"></a>修改视图</h4><p><code>Alter view 视图名 as 查询语句;</code></p>
<h4 id="查看视图名称"><a href="#查看视图名称" class="headerlink" title="查看视图名称"></a>查看视图名称</h4><p><code>Show tables;</code></p>
<h4 id="查看视图结构和详细信息"><a href="#查看视图结构和详细信息" class="headerlink" title="查看视图结构和详细信息"></a>查看视图结构和详细信息</h4><p><code>Desc 视图名;</code><br><code>Show create view|table 视图名 \G</code></p>
<h4 id="删除视图"><a href="#删除视图" class="headerlink" title="删除视图"></a>删除视图</h4><p><code>Drop view 视图名;</code></p>
<h4 id="对视图进行数据插入"><a href="#对视图进行数据插入" class="headerlink" title="对视图进行数据插入"></a>对视图进行数据插入</h4><p><code>insert into 视图名(字段名1,字段名2)values(数值1,数值2);</code></p>
<h4 id="对视图更新数据"><a href="#对视图更新数据" class="headerlink" title="对视图更新数据"></a>对视图更新数据</h4><p><code>update 视图名 set 字段名=数值 where 条件;</code></p>
<h4 id="删除视图中的数据"><a href="#删除视图中的数据" class="headerlink" title="删除视图中的数据"></a>删除视图中的数据</h4><p><code>delete from 视图名 where 条件;</code></p>
<h4 id="删除视图中的数据-1"><a href="#删除视图中的数据-1" class="headerlink" title="删除视图中的数据"></a>删除视图中的数据</h4><p><code>delete from 视图名 where 条件;</code></p>
<h1 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h1><h4 id="触发器的创建"><a href="#触发器的创建" class="headerlink" title="触发器的创建"></a>触发器的创建</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> 触发器名称  <span class="comment">--定义触发器名称</span></span><br><span class="line"><span class="keyword">before</span>|<span class="keyword">after</span>                                <span class="comment">--触发时刻</span></span><br><span class="line"><span class="keyword">insert</span>|<span class="keyword">update</span>|<span class="keyword">delete</span> <span class="keyword">on</span> 表名 <span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span>              <span class="comment">--触发事件</span></span><br><span class="line">执行事件</span><br></pre></td></tr></table></figure>

<h4 id="设置变量"><a href="#设置变量" class="headerlink" title="设置变量"></a>设置变量</h4><p><code>Set @变量名=值;</code></p>
<h4 id="查询变量"><a href="#查询变量" class="headerlink" title="查询变量"></a>查询变量</h4><p><code>Select @变量名;</code></p>
<h4 id="命名结束符"><a href="#命名结束符" class="headerlink" title="命名结束符"></a>命名结束符</h4><p><code>Delimiter 结束符</code></p>
<h1 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h1><h4 id="创建存储过程"><a href="#创建存储过程" class="headerlink" title="创建存储过程"></a>创建存储过程</h4><p><code>Create procedure 存储过程名（参数)</code><br>存储过程体；</p>
<h4 id="执行存储过程"><a href="#执行存储过程" class="headerlink" title="执行存储过程"></a>执行存储过程</h4><p><code>call 存储过程名（@参数）;</code></p>
<h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><p>IN|OUT|INOUT  参数名称 数据类型</p>
<h5 id="输入参数"><a href="#输入参数" class="headerlink" title="输入参数"></a>输入参数</h5><p>IN 参数名称 数据类型</p>
<h5 id="输入参数-1"><a href="#输入参数-1" class="headerlink" title="输入参数"></a>输入参数</h5><p>只受外部输入值的影响，不会受存储过程中程序影响</p>
<h5 id="输出参数"><a href="#输出参数" class="headerlink" title="输出参数"></a>输出参数</h5><p>OUT 参数名称 数据类型<br>输出参数：不受外部输入值的影响，只会受存储过程中程序影响，<br>返回存储过程中的值给输出参数</p>
<h5 id="输入输出参数"><a href="#输入输出参数" class="headerlink" title="输入输出参数"></a>输入输出参数</h5><p>INOUT 参数名称 数据类型<br>输入输出参数：受外部输入值的影响，又会受存储过程中程序影响，<br>返回存储过程中的值给输入输出参数</p>
<h4 id="查询结果输出至变量"><a href="#查询结果输出至变量" class="headerlink" title="查询结果输出至变量"></a>查询结果输出至变量</h4><p><code>Select  查询值 into 变量 from 表名 where 条件;</code></p>
<h4 id="声明局部变量，并同时赋默认值"><a href="#声明局部变量，并同时赋默认值" class="headerlink" title="声明局部变量，并同时赋默认值"></a>声明局部变量，并同时赋默认值</h4><p><code>Declare  变量名称 数据类型 default 默认值;</code><br>注意：<br>（1）局部变量只能在存储过程体的BEGIN…END语句块中声明。<br>（2）局部变量必须在存储过程体的开头处声明。<br>（3）局部变量的作用范围仅限于声明它的BEGIN…END语句块，其它语句块中的语句不可以使用它。<br>（4）局部变量不同于用户变量，两者的区别是：局部变量声明时，在其前面没有使用“@”符号，并且它只能声明它的BEGIN…END语句块中的语句所使用；用户变量在声明时，会在前面使用“@”符号，同时声明的用户变量存在于整个会话之中。</p>
<h4 id="存储过程语句块范围"><a href="#存储过程语句块范围" class="headerlink" title="存储过程语句块范围"></a>存储过程语句块范围</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Begin</span></span><br><span class="line">语句</span><br><span class="line"><span class="keyword">End</span>;</span><br></pre></td></tr></table></figure>

<h4 id="查看存储过程"><a href="#查看存储过程" class="headerlink" title="查看存储过程"></a>查看存储过程</h4><p><code>Show procedure 存储过程名 \G</code></p>
<h4 id="删除存储过程"><a href="#删除存储过程" class="headerlink" title="删除存储过程"></a>删除存储过程</h4><p><code>Drop procedure 存储过程名;</code></p>
<h1 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h1><h4 id="创建事件"><a href="#创建事件" class="headerlink" title="创建事件"></a>创建事件</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">Delimiter $$</span><br><span class="line"><span class="keyword">Create</span> <span class="keyword">event</span> <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span> 事件名称</span><br><span class="line"><span class="keyword">On</span> Schedule 时间调度</span><br><span class="line"><span class="keyword">Do</span></span><br><span class="line"><span class="keyword">Begin</span></span><br><span class="line">事件语句<span class="number">1</span>;</span><br><span class="line">事件语句2;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">$$</span><br></pre></td></tr></table></figure>

<h4 id="时间调度（Schedule）"><a href="#时间调度（Schedule）" class="headerlink" title="时间调度（Schedule）"></a>时间调度（Schedule）</h4><p>用于指定事件何时发生或者每隔多久发生一次；<br>Interval</p>
<h5 id="立即执行"><a href="#立即执行" class="headerlink" title="立即执行"></a>立即执行</h5><p><code>On schedule at now()</code></p>
<h5 id="隔多长时间后执行"><a href="#隔多长时间后执行" class="headerlink" title="隔多长时间后执行"></a>隔多长时间后执行</h5><p><code>On schedule at now()+interval 时间 时间单位</code><br>    时间单位:年year,月month,周week,日day,小时hour,分钟minute,秒second</p>
<h5 id="每多长时间执行一次"><a href="#每多长时间执行一次" class="headerlink" title="每多长时间执行一次"></a>每多长时间执行一次</h5><p><code>On scheduler every 时间 时间单位</code></p>
<h4 id="Timestamp"><a href="#Timestamp" class="headerlink" title="Timestamp"></a>Timestamp</h4><p>表示具体的时间点<br>后可跟一个具体的时间点</p>
<h4 id="查看事件调度器是否开启"><a href="#查看事件调度器是否开启" class="headerlink" title="查看事件调度器是否开启"></a>查看事件调度器是否开启</h4><p><code>Show variables like ‘event_scheduler’;</code></p>
<h4 id="查看系统变量"><a href="#查看系统变量" class="headerlink" title="查看系统变量"></a>查看系统变量</h4><p><code>Select @@event_scheduler;</code></p>
<h4 id="开启事件调度器"><a href="#开启事件调度器" class="headerlink" title="开启事件调度器"></a>开启事件调度器</h4><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line"><span class="builtin-name">Set</span> global <span class="attribute">event_scheduler</span>=1;</span><br><span class="line">或</span><br><span class="line"><span class="builtin-name">Set</span> global <span class="attribute">event_scheduler</span>=<span class="literal">true</span>;</span><br></pre></td></tr></table></figure>

<h4 id="修改事件"><a href="#修改事件" class="headerlink" title="修改事件"></a>修改事件</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">EVENT</span> 事件名称</span><br><span class="line"><span class="keyword">ON</span> SCHEDULE 时间调度</span><br><span class="line">[<span class="keyword">RENAME</span> <span class="keyword">TO</span> 新的事件名称]</span><br><span class="line"><span class="keyword">Do</span> event_body;</span><br><span class="line"><span class="keyword">Do</span></span><br><span class="line"><span class="keyword">Begin</span></span><br><span class="line">事件语句<span class="number">1</span>;</span><br><span class="line">事件语句2;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">$$</span><br></pre></td></tr></table></figure>

<h4 id="临时关闭已创建的事件"><a href="#临时关闭已创建的事件" class="headerlink" title="临时关闭已创建的事件"></a>临时关闭已创建的事件</h4><p><code>Alter event 事件名 disable;</code></p>
<h4 id="再次开启已创建的事件"><a href="#再次开启已创建的事件" class="headerlink" title="再次开启已创建的事件"></a>再次开启已创建的事件</h4><p><code>Alter event 事件名 enable;</code></p>
<h4 id="删除事件"><a href="#删除事件" class="headerlink" title="删除事件"></a>删除事件</h4><p><code>Drop event [if exists] 事件名;</code></p>
<h4 id="条件选择循环以及游标"><a href="#条件选择循环以及游标" class="headerlink" title="条件选择循环以及游标"></a>条件选择循环以及游标</h4><h5 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h5><figure class="highlight ada"><table><tr><td class="code"><pre><span class="line"><span class="keyword">IF</span>  条件 <span class="keyword">then</span></span><br><span class="line">语句<span class="number">1</span>;</span><br><span class="line"><span class="keyword">Else</span> <span class="keyword">if</span> 条件 <span class="keyword">then</span> </span><br><span class="line">语句<span class="number">2</span>；</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">语句<span class="number">3</span>；</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">if</span>;</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">if</span>;</span><br></pre></td></tr></table></figure>

<h5 id="分支选择语句"><a href="#分支选择语句" class="headerlink" title="分支选择语句"></a>分支选择语句</h5><figure class="highlight ada"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Case</span> 变量名</span><br><span class="line"><span class="keyword">when</span> 数值<span class="number">1</span> <span class="keyword">then</span></span><br><span class="line">语句<span class="number">1</span>；</span><br><span class="line"><span class="keyword">when</span> 数值<span class="number">2</span> <span class="keyword">then</span></span><br><span class="line">语句<span class="number">2</span>；</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">语句<span class="number">3</span>；</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line">循环控制语句</span><br><span class="line"><span class="keyword">While</span>循环</span><br><span class="line"><span class="keyword">while</span> 条件 <span class="keyword">Do</span></span><br><span class="line">循环语句；</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">while</span>;</span><br></pre></td></tr></table></figure>

<h5 id="repeat循环"><a href="#repeat循环" class="headerlink" title="repeat循环"></a>repeat循环</h5><figure class="highlight cal"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Repeat</span> </span><br><span class="line">循环语句；</span><br><span class="line"><span class="keyword">Until</span> 条件</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">repeat</span>;</span><br></pre></td></tr></table></figure>

<h4 id="游标-CURSOR"><a href="#游标-CURSOR" class="headerlink" title="游标(CURSOR)"></a>游标(CURSOR)</h4><p>1.只能用于存储过程或存储函数中，不能单独在查询操作中使用；<br>2.在存储过程或存储函数中可以定义多个游标，但是一个BEGIN…END<br>语句块中每一个游标的名字必须是唯一的；<br>3.游标不是一条SELECT语句，是被SELECT语句检索出来的结果集；</p>
<h5 id="1-申明游标"><a href="#1-申明游标" class="headerlink" title="1.申明游标"></a>1.申明游标</h5><p><code>Declare 游标名称 CURSOR for Select 语句;</code></p>
<h5 id="2-开游标："><a href="#2-开游标：" class="headerlink" title="2.开游标："></a>2.开游标：</h5><p><code>OPEN 游标名称;</code></p>
<h5 id="3-游标取值："><a href="#3-游标取值：" class="headerlink" title="3.游标取值："></a>3.游标取值：</h5><p><code>FETCH 游标名 INTO 变量名;</code></p>
<h5 id="4-关闭游标："><a href="#4-关闭游标：" class="headerlink" title="4.关闭游标："></a>4.关闭游标：</h5><p><code>CLOSE 游标名称;</code></p>
<h4 id="句柄"><a href="#句柄" class="headerlink" title="句柄"></a>句柄</h4><h5 id="定义句柄"><a href="#定义句柄" class="headerlink" title="定义句柄"></a>定义句柄</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Declare</span> continue <span class="keyword">handler</span> <span class="keyword">for</span> <span class="keyword">NOT</span> <span class="keyword">FOUND</span></span><br><span class="line"><span class="keyword">set</span> 变量名=<span class="number">0</span>|<span class="literal">false</span>;</span><br></pre></td></tr></table></figure>

<p>未完待续~</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">钟舒艺</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2019/08/14/MySQL语句总结/">http://yoursite.com/2019/08/14/MySQL语句总结/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com">钟舒艺的博客</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/总结/">总结</a></div><div class="post-qr-code"><div class="post-qr-code-item"><img class="post-qr-code__img" src="/img/alipay.jpg"><div class="post-qr-code__desc">支付宝打赏</div></div><div class="post-qr-code-item"><img class="post-qr-code__img" src="/img/weixin.jpg"><div class="post-qr-code__desc">微信打赏</div></div></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2019/08/17/Java总笔记/"><i class="fa fa-chevron-left">  </i><span>Java总笔记</span></a></div><div class="next-post pull-right"><a href="/2019/07/26/EXCEL常用函数总结/"><span>EXCEL常用函数总结</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitment-container"></div><script>var gitment = new Gitment({
  id: md5(decodeURI(location.pathname)),
  owner: 'https://github.com/zhongshuyi',
  repo: 'https://github.com/zhongshuyi/zhongshuyi.github.io',
  oauth: {
    client_id: '84bea3f88c6f03455cbd',
    client_secret: 'c2d78b22fea19f92e17f4d38f13a3537f680ef0e'
  }
})
gitment.render('gitment-container')</script></div></div><footer class="footer-bg" style="background-image: url(/img/325115.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2019 By 钟舒艺</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">我们的征途是星辰大海,从此便只顾风雨兼程</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>